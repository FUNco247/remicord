"use strict";function asyncGeneratorStep(e,t,r,n,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,o)}function _asyncToGenerator(u){return function(){var e=this,c=arguments;return new Promise(function(t,r){var n=u.apply(e,c);function o(e){asyncGeneratorStep(n,t,r,o,a,"next",e)}function a(e){asyncGeneratorStep(n,t,r,o,a,"throw",e)}o(void 0)})}}function _asyncIterator(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new AsyncFromSyncIterator(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(AsyncFromSyncIterator=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}var recordArr,booleanToString=function(e){e.forEach(function(e){e.innerText="true"===e.innerText?"O":"-"})},drawRecord=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o,a,c,u,i,s,d,l,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=document.querySelector("tbody.dataTable"),n=["siteName","distance","water","overTime","nightSupport","oiling"],r.innerHTML&&(r.innerHTML=""),a=o=!1,e.prev=5,u=_asyncIterator(t);case 7:return e.next=9,u.next();case 9:if(!(o=!(i=e.sent).done)){e.next=51;break}record=i.value,i=document.createElement("tr"),d=s=!1,e.prev=14,p=_asyncIterator(n);case 16:return e.next=18,p.next();case 18:if(!(s=!(m=e.sent).done)){e.next=27;break}index=m.value,(m=document.createElement("td")).classList.add("".concat(index)),m.innerText=record[index],i.appendChild(m);case 24:s=!1,e.next=16;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(14),d=!0,l=e.t0;case 33:if(e.prev=33,e.prev=34,s&&null!=p.return)return e.next=38,p.return();e.next=38;break;case 38:if(e.prev=38,d)throw l;e.next=41;break;case 41:return e.finish(38);case 42:return e.finish(33);case 43:(m=document.createElement("button")).classList.add("removeBtn"),m.innerText="삭제",i.appendChild(m),r.appendChild(i);case 48:o=!1,e.next=7;break;case 51:e.next=57;break;case 53:e.prev=53,e.t1=e.catch(5),a=!0,c=e.t1;case 57:if(e.prev=57,e.prev=58,o&&null!=u.return)return e.next=62,u.return();e.next=62;break;case 62:if(e.prev=62,a)throw c;e.next=65;break;case 65:return e.finish(62);case 66:return e.finish(57);case 67:case"end":return e.stop()}},e,null,[[5,53,57,67],[14,29,33,43],[34,,38,42],[58,,62,66]])}));return function(e){return t.apply(this,arguments)}}(),dateSelectInput=document.querySelector("input[name=date]"),getRecord=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("http://localhost:8282/record/edit/api"),t={searchDate:dateSelectInput.value},r.search=new URLSearchParams(t).toString(),e.next=5,fetch(r).then(function(e){return e.json()}).then(function(e){(recordArr=e.record).forEach(function(e){delete e._id})});case 5:return e.next=7,drawRecord(recordArr);case 7:t=document.querySelectorAll("td.water"),r=document.querySelectorAll("td.overTime"),n=document.querySelectorAll("td.nightSupport"),booleanToString(t),booleanToString(r),booleanToString(n);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),addToListBtn=(dateSelectInput.addEventListener("input",getRecord),document.querySelector("button.addToList")),addToList=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,o,a,c,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.querySelector("input[name=date]").value,c=document.querySelector("input[name=siteName]").value,u=document.querySelector("input[name=distance]").value,i=document.querySelector("input[name=water]").checked,t=document.querySelector("input[name=overTime]").checked,r=document.querySelector("input[name=nightSupport]").checked,n=document.querySelector("input[name=memo]").value,o=document.querySelector("input[name=oiling]").value,a={date:new Date(a).toISOString(),siteName:c,distance:Number(u),water:i,overTime:t,nightSupport:r,memo:n,oiling:Number(o)},recordArr.push(a),e.next=12,drawRecord(recordArr);case 12:c=document.querySelectorAll("td.water"),u=document.querySelectorAll("td.overTime"),i=document.querySelectorAll("td.nightSupport"),booleanToString(c),booleanToString(u),booleanToString(i);case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();addToListBtn.addEventListener("click",addToList);